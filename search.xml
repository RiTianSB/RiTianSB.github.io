<?xml version="1.0" encoding="utf-8"?>
<search> 
  
  
    
    <entry>
      <title>使用JavaScript开发一个Ai五子棋，人机对战 | 内附源码</title>
      <link href="/2022/07/22/Ai%E4%BA%94%E5%AD%90%E6%A3%8B/"/>
      <url>/2022/07/22/Ai%E4%BA%94%E5%AD%90%E6%A3%8B/</url>
      
        <content type="html"><![CDATA[<h1 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h1><img src="https://p9-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/25a7f05ae19d4897940bfde22fd524b5~tplv-k3u1fbpfcp-zoom-in-crop-mark:3024:0:0:0.awebp">最近有些无聊了，写了个人机五子棋玩玩。<p>相信大家肯定都玩过五子棋，使用HTML + CSS + JavaScript。</p><h1 id="规则"><a href="#规则" class="headerlink" title="规则"></a>规则</h1><p>做之前，肯定是要了解一下五子棋的规则：<br>（1）对局双方各执一色棋子。<br>（2）空棋盘开局。<br>（3）黑先、白后，交替下子，每次只能下一子。<br>（4）棋子下在棋盘的空白点上，棋子下定后不得移动或拿走。<br>（5）黑方的第一枚棋子必须下在天元点上，即中心交叉点</p><h2 id="注意事项"><a href="#注意事项" class="headerlink" title="注意事项"></a>注意事项</h2><p>1.当有三个子连成一条直线时，就应采取防守，堵住三子的一端，否则就会输掉比赛。<br>2.应当避免在比赛内出现三三禁手、四四禁手等情况，否则就会不小心输掉比赛。</p><h1 id="开发"><a href="#开发" class="headerlink" title="开发"></a>开发</h1><h2 id="代码基本结构"><a href="#代码基本结构" class="headerlink" title="代码基本结构"></a>代码基本结构</h2><p>HTML 和 CSS</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line">&lt;!<span class="variable constant_">DOCTYPE</span> html&gt;</span><br><span class="line">&lt;html lang=&quot;zh&quot;&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">    &lt;meta charset=&quot;UTF-8&quot;&gt;</span><br><span class="line">    &lt;meta http-equiv=&quot;X-UA-Compatible&quot; content=&quot;IE=edge&quot;&gt;</span><br><span class="line">    &lt;meta name=&quot;viewport&quot; content=&quot;width=device-width, initial-scale=1.0&quot;&gt;</span><br><span class="line">    &lt;title&gt;Document&lt;/title&gt;</span><br><span class="line">    &lt;style&gt;</span><br><span class="line">        * &#123;</span><br><span class="line">            margin: 0;</span><br><span class="line">            padding: 0;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        html,</span><br><span class="line">        body &#123;</span><br><span class="line">            width: 100%;</span><br><span class="line">            height: 100%;</span><br><span class="line">            display: flex;</span><br><span class="line">            align-items: center;</span><br><span class="line">            justify-content: center;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        #canvas &#123;</span><br><span class="line">            box-shadow: 3px 3px 3px 3px rgb(194, 188, 188);</span><br><span class="line">            cursor: pointer;</span><br><span class="line">        &#125;</span><br><span class="line">    &lt;/style&gt;</span><br><span class="line">&lt;/head&gt;</span><br><span class="line"></span><br><span class="line">&lt;body&gt;</span><br><span class="line">    &lt;canvas id=&quot;canvas&quot; width=&quot;450&quot; height=&quot;450&quot;&gt;&lt;/canvas&gt;```</span><br><span class="line">&lt;/body&gt;</span><br><span class="line"></span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure><img src="https://p9-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/343ac6f19b6b49028d9d47df7b948c1b~tplv-k3u1fbpfcp-zoom-in-crop-mark:3024:0:0:0.awebp?"><p>接下来该使用JavaScript控制canvas绘制格子</p><h2 id="绘制地图"><a href="#绘制地图" class="headerlink" title="绘制地图"></a>绘制地图</h2><p>JavaScript代码部分</p><h3 id="获取canvas"><a href="#获取canvas" class="headerlink" title="获取canvas"></a>获取canvas</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> canvas = <span class="variable language_">document</span>.<span class="title function_">querySelector</span>(<span class="string">&#x27;#canvas&#x27;</span>);</span><br><span class="line"><span class="keyword">let</span> ctx = canvas.<span class="title function_">getContext</span>(<span class="string">&#x27;2d&#x27;</span>);</span><br></pre></td></tr></table></figure><h3 id="绘制格子"><a href="#绘制格子" class="headerlink" title="绘制格子"></a>绘制格子</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 设置颜色</span></span><br><span class="line">ctx.<span class="property">strokeStyle</span> = <span class="string">&#x27;#B9B9B9&#x27;</span>;</span><br><span class="line"><span class="comment">// 横线</span></span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; <span class="number">15</span>; i++) &#123;</span><br><span class="line">    ctx.<span class="title function_">moveTo</span>(<span class="number">15</span>, <span class="number">15</span> + i * <span class="number">30</span>);</span><br><span class="line">    ctx.<span class="title function_">lineTo</span>(<span class="number">435</span>, <span class="number">15</span> + i * <span class="number">30</span>);</span><br><span class="line">    ctx.<span class="title function_">stroke</span>();</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 竖线</span></span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; <span class="number">15</span>; i++) &#123;</span><br><span class="line">    ctx.<span class="title function_">moveTo</span>(<span class="number">15</span> + i * <span class="number">30</span>, <span class="number">15</span>);</span><br><span class="line">    ctx.<span class="title function_">lineTo</span>(<span class="number">15</span> + i * <span class="number">30</span>, <span class="number">435</span>);</span><br><span class="line">    ctx.<span class="title function_">stroke</span>();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>做到这里，我们的格子已经成型了</p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/c0206bbf800c4d80846e106d78f84aea~tplv-k3u1fbpfcp-zoom-in-crop-mark:3024:0:0:0.awebp?"><h2 id="赢法计算"><a href="#赢法计算" class="headerlink" title="赢法计算"></a>赢法计算</h2><p>这一步就比较烧脑了，也是整个五子棋部分最重要，最难的一步。</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 赢法数组</span></span><br><span class="line"><span class="keyword">let</span> wins = [];</span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; <span class="number">15</span>; i++) &#123;</span><br><span class="line">    wins[i] = [];</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">let</span> j = <span class="number">0</span>; j &lt; <span class="number">15</span>; j++) &#123;</span><br><span class="line">        wins[i][j] = [];</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> count = <span class="number">0</span>;</span><br><span class="line"><span class="comment">// 横线</span></span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; <span class="number">15</span>; i++) &#123;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">let</span> j = <span class="number">0</span>; j &lt; <span class="number">11</span>; j++) &#123;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">let</span> k = <span class="number">0</span>; k &lt; <span class="number">5</span>; k++) &#123;</span><br><span class="line">            wins[j + k][i][count] = <span class="literal">true</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        count++;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 竖线</span></span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; <span class="number">15</span>; i++) &#123;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">let</span> j = <span class="number">0</span>; j &lt; <span class="number">11</span>; j++) &#123;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">let</span> k = <span class="number">0</span>; k &lt; <span class="number">5</span>; k++) &#123;</span><br><span class="line">            wins[i][j + k][count] = <span class="literal">true</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        count++;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 正斜线</span></span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; <span class="number">11</span>; i++) &#123;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">let</span> j = <span class="number">0</span>; j &lt; <span class="number">11</span>; j++) &#123;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">let</span> k = <span class="number">0</span>; k &lt; <span class="number">5</span>; k++) &#123;</span><br><span class="line">            wins[i + k][j + k][count] = <span class="literal">true</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        count++;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 反斜线</span></span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; <span class="number">11</span>; i++) &#123;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">let</span> j = <span class="number">14</span>; j &gt; <span class="number">3</span>; j--) &#123;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">let</span> k = <span class="number">0</span>; k &lt; <span class="number">5</span>; k++) &#123;</span><br><span class="line">            wins[i + k][j - k][count] = <span class="literal">true</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        count++;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="赢法原理"><a href="#赢法原理" class="headerlink" title="赢法原理"></a>赢法原理</h2><p>这一步是计算五子棋的每一种赢法，使用for循环将每一种赢法计算出来，并且添加到数组当中。</p><p>拿横线赢法举例，他会找到这五个，形成一种赢法：</p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/3147f3ec2c4644d3bb84f8f5e1679de2~tplv-k3u1fbpfcp-zoom-in-crop-mark:3024:0:0:0.awebp?"><p>第二次循环，沿着上一次找到的绘制+1，接着找：</p><img src="https://p1-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/c8568fe8dbd64fecb54ff0d972132ae6~tplv-k3u1fbpfcp-zoom-in-crop-mark:3024:0:0:0.awebp?"><p>直到找到最后一中赢法</p><img src="https://p9-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/31dce36e509b48d7b7e12cdba0fa8c7c~tplv-k3u1fbpfcp-zoom-in-crop-mark:3024:0:0:0.awebp?"><p>竖线也是如此，就不多解释了，都是一个原理，把他竖过来。</p><p>斜线的第一步是这样的：</p><img src="https://p9-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/ca7086839d48443bb0fb0d98b5fd354b~tplv-k3u1fbpfcp-zoom-in-crop-mark:3024:0:0:0.awebp?"><p style="font-weight: bold">当一中颜色的排列，符合一种赢法，游戏将胜利！</p><img src="https://p9-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/f36eb916368b4d69a87fb1fcfa8c4b22~tplv-k3u1fbpfcp-zoom-in-crop-mark:3024:0:0:0.awebp?"><h2 id="下棋"><a href="#下棋" class="headerlink" title="下棋"></a>下棋</h2><p>首先定义一个二维数组，标记坐标是否已经下了棋子</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> chessboard = [];</span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; <span class="number">15</span>; i++) &#123;</span><br><span class="line">    chessboard[i] = [];</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">let</span> j = <span class="number">0</span>; j &lt; <span class="number">15</span>; j++) &#123;</span><br><span class="line">        chessboard[i][j] = <span class="number">0</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 标记谁来下棋</span></span><br><span class="line"><span class="keyword">let</span> me = <span class="literal">true</span>;</span><br><span class="line"><span class="comment">// 判断游戏是否结束</span></span><br><span class="line"><span class="keyword">let</span> over = <span class="literal">false</span>;</span><br><span class="line"><span class="comment">// 记录用户在赢法上的分支</span></span><br><span class="line"><span class="keyword">let</span> myWin = [];</span><br><span class="line"><span class="comment">// 记录计算机在赢法上的分值;</span></span><br><span class="line"><span class="keyword">let</span> aiWin = [];</span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; count; i++) &#123;</span><br><span class="line">    myWin[i] = <span class="number">0</span>;</span><br><span class="line">    aiWin[i] = <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>当玩家点击canvas画布时候，触发一下事件，表示下棋。</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br></pre></td><td class="code"><pre><span class="line">canvas.<span class="property">onclick</span> = <span class="keyword">function</span> (<span class="params">e</span>) &#123;</span><br><span class="line">    <span class="comment">// 判断游戏是否结束</span></span><br><span class="line">    <span class="keyword">if</span> (over) <span class="keyword">return</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 判断是否可以下棋</span></span><br><span class="line">    <span class="keyword">if</span> (!me) <span class="keyword">return</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 获取坐标</span></span><br><span class="line">    <span class="keyword">let</span> x = e.<span class="property">offsetX</span>;</span><br><span class="line">    <span class="keyword">let</span> y = e.<span class="property">offsetY</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 舍弃小数</span></span><br><span class="line">    <span class="keyword">let</span> i = <span class="title class_">Math</span>.<span class="title function_">floor</span>(x / <span class="number">30</span>);</span><br><span class="line">    <span class="keyword">let</span> j = <span class="title class_">Math</span>.<span class="title function_">floor</span>(y / <span class="number">30</span>);</span><br><span class="line">    <span class="keyword">if</span> (chessboard[i][j] == <span class="number">0</span>) &#123;</span><br><span class="line">        <span class="comment">// 标记这个地方有一个子了</span></span><br><span class="line">        chessboard[i][j] = <span class="number">1</span>;</span><br><span class="line">        <span class="title function_">oneStep</span>(i, j, me);</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">let</span> k = <span class="number">0</span>; k &lt; count; k++) &#123;</span><br><span class="line">            <span class="keyword">if</span> (wins[i][j][k]) &#123;</span><br><span class="line">                myWin[k]++;</span><br><span class="line">                <span class="keyword">if</span> (myWin[k] == <span class="number">5</span>) &#123;</span><br><span class="line">                    over = <span class="literal">true</span>;</span><br><span class="line">                    <span class="title function_">alert</span>(<span class="string">&#x27;你赢了&#x27;</span>)</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span> (!over) &#123;</span><br><span class="line">            me = !me;</span><br><span class="line">            <span class="comment">// 计算机下棋</span></span><br><span class="line">            <span class="title function_">ai</span>();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 计算机下棋</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">ai</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="comment">// 空白子在用户所占用赢法上的分值</span></span><br><span class="line">    <span class="keyword">let</span> myScore = [];</span><br><span class="line">    <span class="comment">// 空白子在计算机所占赢法上的分值</span></span><br><span class="line">    <span class="keyword">let</span> aiScore = [];</span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; <span class="number">15</span>; i++) &#123;</span><br><span class="line">        myScore[i] = [];</span><br><span class="line">        aiScore[i] = [];</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">let</span> j = <span class="number">0</span>; j &lt; <span class="number">15</span>; j++) &#123;</span><br><span class="line">            myScore[i][j] = <span class="number">0</span>;</span><br><span class="line">            aiScore[i][j] = <span class="number">0</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// 空白字的最大分值</span></span><br><span class="line">    <span class="keyword">let</span> max = <span class="number">0</span>;</span><br><span class="line">    <span class="comment">// 最大分值空白子所在的坐标</span></span><br><span class="line">    <span class="keyword">let</span> x = <span class="number">0</span>, y = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; <span class="number">15</span>; i++) &#123;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">let</span> j = <span class="number">0</span>; j &lt; <span class="number">15</span>; j++) &#123;</span><br><span class="line">            <span class="comment">// 判断是不是空白子</span></span><br><span class="line">            <span class="keyword">if</span> (chessboard[i][j] == <span class="number">0</span>) &#123;</span><br><span class="line">                <span class="keyword">for</span> (<span class="keyword">let</span> k = <span class="number">0</span>; k &lt; count; k++) &#123;</span><br><span class="line">                    <span class="keyword">if</span> (wins[i][j][k]) &#123;</span><br><span class="line">                        <span class="keyword">if</span> (myWin[k] == <span class="number">1</span>) &#123;</span><br><span class="line">                            myScore[i][j] += <span class="number">200</span>;</span><br><span class="line">                        &#125; <span class="keyword">else</span> <span class="keyword">if</span> (myWin[k] == <span class="number">2</span>) &#123;</span><br><span class="line">                            myScore[i][j] += <span class="number">400</span>;</span><br><span class="line">                        &#125; <span class="keyword">else</span> <span class="keyword">if</span> (myWin[k] == <span class="number">3</span>) &#123;</span><br><span class="line">                            myScore[i][j] += <span class="number">2000</span>;</span><br><span class="line">                        &#125; <span class="keyword">else</span> <span class="keyword">if</span> (myWin[k] == <span class="number">4</span>) &#123;</span><br><span class="line">                            myScore[i][j] += <span class="number">10000</span>;</span><br><span class="line">                        &#125;</span><br><span class="line">                        <span class="keyword">if</span> (aiWin[k] == <span class="number">1</span>) &#123;</span><br><span class="line">                            aiScore[i][j] += <span class="number">220</span>;</span><br><span class="line">                        &#125; <span class="keyword">else</span> <span class="keyword">if</span> (aiWin[k] == <span class="number">2</span>) &#123;</span><br><span class="line">                            aiScore[i][j] += <span class="number">420</span>;</span><br><span class="line">                        &#125; <span class="keyword">else</span> <span class="keyword">if</span> (aiWin[k] == <span class="number">3</span>) &#123;</span><br><span class="line">                            aiScore[i][j] += <span class="number">2200</span>;</span><br><span class="line">                        &#125; <span class="keyword">else</span> <span class="keyword">if</span> (aiWin[k] == <span class="number">4</span>) &#123;</span><br><span class="line">                            aiScore[i][j] += <span class="number">20000</span>;</span><br><span class="line">                        &#125;</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line">                <span class="keyword">if</span> (myScore[i][j] &gt; max) &#123;</span><br><span class="line">                    max = myScore[i][j];</span><br><span class="line">                    x = i;</span><br><span class="line">                    y = j;</span><br><span class="line">                &#125; <span class="keyword">else</span> <span class="keyword">if</span> (myScore[i][j] == max) &#123;</span><br><span class="line">                    <span class="keyword">if</span> (aiScore[i][j] &gt; max) &#123;</span><br><span class="line">                        max = aiScore[i][j];</span><br><span class="line">                        x = i;</span><br><span class="line">                        y = j;</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line">                <span class="keyword">if</span> (aiScore[i][j] &gt; max) &#123;</span><br><span class="line">                    max = aiScore[i][j];</span><br><span class="line">                    x = i;</span><br><span class="line">                    y = j;</span><br><span class="line">                &#125; <span class="keyword">else</span> <span class="keyword">if</span> (aiScore[i][j] == max) &#123;</span><br><span class="line">                    <span class="keyword">if</span> (myScore[i][j] &gt; max) &#123;</span><br><span class="line">                        max = myScore[i][j];</span><br><span class="line">                        x = i;</span><br><span class="line">                        y = j;</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// 玩家下棋</span></span><br><span class="line">    <span class="title function_">oneStep</span>(x, y, me);</span><br><span class="line">    </span><br><span class="line">    chessboard[x][y] = <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">let</span> k = <span class="number">0</span>; k &lt; count; k++) &#123;</span><br><span class="line">        <span class="keyword">if</span> (wins[x][y][k]) &#123;</span><br><span class="line">            aiWin[k] += <span class="number">1</span>;</span><br><span class="line">            <span class="keyword">if</span> (aiWin[k] == <span class="number">5</span>) &#123;</span><br><span class="line">                <span class="title function_">alert</span>(<span class="string">&#x27;计算机赢了&#x27;</span>)</span><br><span class="line">                over = <span class="literal">true</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span> (!over) me = !me;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 玩家下棋</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">oneStep</span>(<span class="params">i, j, me</span>) &#123;</span><br><span class="line">    <span class="comment">// 下一个棋子</span></span><br><span class="line">    ctx.<span class="title function_">beginPath</span>();</span><br><span class="line">    ctx.<span class="title function_">arc</span>(<span class="number">15</span> + i * <span class="number">30</span>, <span class="number">15</span> + j * <span class="number">30</span>, <span class="number">13</span>, <span class="number">0</span>, <span class="number">2</span> * <span class="title class_">Math</span>.<span class="property">PI</span>);</span><br><span class="line">    ctx.<span class="title function_">closePath</span>();</span><br><span class="line">    <span class="keyword">let</span> color;</span><br><span class="line">    <span class="keyword">if</span> (me) &#123;</span><br><span class="line">        color = <span class="string">&#x27;#000000&#x27;</span>;</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        color = <span class="string">&#x27;red&#x27;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    ctx.<span class="property">fillStyle</span> = color;</span><br><span class="line">    ctx.<span class="title function_">fill</span>();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p style="font-weight: bold">到这里，人机五子棋已经完成了</p><h1 id="结尾"><a href="#结尾" class="headerlink" title="结尾"></a>结尾</h1><p>本人还是个学生，有很多不足的地方，希望各位大佬们给小弟指点指点。</p><img src="https://p1-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/dfa6d1e2717847469a40b961ded9b72b~tplv-k3u1fbpfcp-zoom-in-crop-mark:3024:0:0:0.awebp?">]]></content>
      
      
      <categories>
          
          <category> 前端 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> JavaScript </tag>
            
            <tag> 前端 </tag>
            
        </tags>
      
    </entry>
    
    
  
  
</search>
